<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rota Planlayıcı - Demo</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol/ol.css">
  <script src="https://cdn.jsdelivr.net/npm/ol@7.3.0/dist/ol.js"></script>
  <style>
    :root {
      --primary-color: #B76CFD;
      --secondary-color: #FF9FF3;
      --accent-color: #FF6B9D;
      --light-purple: #E2C3FF;
      --pastel-pink: #FFD6E7;
      --text-color: #5A4A6D;
      --light-text: #8B7B9D;
      --card-bg: rgba(255, 255, 255, 0.95);
      --transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      --gradient: linear-gradient(135deg, #B76CFD 0%, #FF9FF3 50%, #FF6B9D 100%);
      --soft-gradient: linear-gradient(135deg, #E2C3FF 0%, #FFD6E7 100%);
    }

    body {
      font-family: 'Montserrat', sans-serif;
      color: var(--text-color);
      line-height: 1.6;
      background: var(--soft-gradient);
      min-height: 100vh;
    }

    .animated-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -2;
      background: var(--soft-gradient);
    }

    .floating-shapes {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      overflow: hidden;
    }

    .shape {
      position: absolute;
      opacity: 0.3;
      border-radius: 50%;
      background: var(--primary-color);
      animation: float 15s infinite linear;
    }

    .shape:nth-child(1) {
      width: 80px;
      height: 80px;
      top: 20%;
      left: 10%;
      animation-delay: 0s;
    }

    .shape:nth-child(2) {
      width: 120px;
      height: 120px;
      top: 60%;
      left: 80%;
      animation-delay: -5s;
      background: var(--secondary-color);
    }

    .shape:nth-child(3) {
      width: 60px;
      height: 60px;
      top: 80%;
      left: 20%;
      animation-delay: -10s;
      background: var(--accent-color);
    }

    /* Navigation */
    nav {
      display: flex;
      justify-content: center;
      padding: 1.5rem 2rem;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(15px);
      box-shadow: 0 5px 25px rgba(183, 108, 253, 0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    nav a {
      text-decoration: none;
      color: var(--text-color);
      font-weight: 500;
      margin: 0 1.5rem;
      padding: 0.7rem 1.5rem;
      transition: var(--transition);
      border-radius: 30px;
    }

    nav a:hover {
      color: white;
      background: var(--gradient);
      transform: translateY(-3px);
      box-shadow: 0 10px 20px rgba(183, 108, 253, 0.3);
    }

    nav a.active {
      color: white;
      background: var(--gradient);
      box-shadow: 0 5px 15px rgba(183, 108, 253, 0.4);
    }

    .demo-container {
      max-width: 1400px;
      margin: 2rem auto;
      padding: 0 2rem;
    }

    .demo-header {
      text-align: center;
      margin-bottom: 2rem;
      background: var(--card-bg);
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(183, 108, 253, 0.1);
    }

    .demo-header h1 {
      font-size: 2.5rem;
      color: var(--text-color);
      margin-bottom: 1rem;
    }

    .demo-description {
      color: var(--light-text);
      font-size: 1.1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    .route-controls {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
      margin-bottom: 2rem;
    }

    @media (max-width: 768px) {
      .route-controls {
        grid-template-columns: 1fr;
      }
    }

    .control-panel {
      background: var(--card-bg);
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(183, 108, 253, 0.1);
    }

    .control-group {
      margin-bottom: 1.5rem;
    }

    .control-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--text-color);
    }

    .control-group input, .control-group select {
      width: 100%;
      padding: 0.8rem 1rem;
      border: 2px solid rgba(183, 108, 253, 0.2);
      border-radius: 10px;
      font-family: 'Montserrat', sans-serif;
      font-size: 1rem;
      transition: var(--transition);
    }

    .control-group input:focus, .control-group select:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    .route-button {
      width: 100%;
      padding: 1rem;
      background: var(--gradient);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      margin-top: 1rem;
    }

    .route-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(183, 108, 253, 0.3);
    }

    .route-info {
      background: var(--card-bg);
      padding: 1.5rem;
      border-radius: 15px;
      margin-top: 1rem;
      box-shadow: 0 10px 25px rgba(183, 108, 253, 0.1);
    }

    .info-item {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid rgba(183, 108, 253, 0.1);
    }

    .info-item:last-child {
      margin-bottom: 0;
      border-bottom: none;
    }

    #route-map {
      height: 500px;
      width: 100%;
      border-radius: 20px;
      box-shadow: 0 20px 50px rgba(183, 108, 253, 0.2);
      border: 1px solid rgba(255, 255, 255, 0.8);
      background: white;
    }

    .back-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem 2rem;
      background: var(--gradient);
      color: white;
      text-decoration: none;
      border-radius: 25px;
      margin-top: 2rem;
      transition: var(--transition);
      font-weight: 600;
    }

    .back-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(183, 108, 253, 0.3);
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      33% { transform: translateY(-20px) rotate(120deg); }
      66% { transform: translateY(10px) rotate(240deg); }
    }

    @media (max-width: 768px) {
      .demo-container {
        padding: 0 1rem;
      }
      
      .demo-header h1 {
        font-size: 2rem;
      }
      
      #route-map {
        height: 400px;
      }
    }
  </style>
</head>
<body>
  <div class="animated-bg"></div>
  <div class="floating-shapes">
    <div class="shape"></div>
    <div class="shape"></div>
    <div class="shape"></div>
  </div>

  <nav>
    <a href="index.html">Ana Sayfa</a>
    <a href="background.html">Background</a>
    <a href="projects.html">Projects</a>
    <a href="technologies.html">Technologies</a>
  </nav>

  <main class="demo-container">
    <div class="demo-header fade-in">
      <h1>Rota Planlayıcı</h1>
      <p class="demo-description">
        İstanbul'da özel rotalar oluşturun, mesafeleri hesaplayın ve en iyi güzergahı bulun.
      </p>
    </div>

    <div class="route-controls">
      <div class="control-panel fade-in">
        <div class="control-group">
          <label for="startPoint"><i class="fas fa-play-circle"></i> Başlangıç Noktası</label>
          <select id="startPoint">
            <option value="besiktas">Beşiktaş</option>
            <option value="taksim">Taksim Meydanı</option>
            <option value="sultanahmet">Sultanahmet</option>
            <option value="kapalicarsi">Kapalıçarşı</option>
            <option value="uskudar">Üsküdar</option>
            <option value="kadikoy">Kadıköy</option>
          </select>
        </div>

        <div class="control-group">
          <label for="endPoint"><i class="fas fa-flag-checkered"></i> Bitiş Noktası</label>
          <select id="endPoint">
            <option value="kapalicarsi">Kapalıçarşı</option>
            <option value="besiktas">Beşiktaş</option>
            <option value="taksim">Taksim Meydanı</option>
            <option value="sultanahmet">Sultanahmet</option>
            <option value="uskudar">Üsküdar</option>
            <option value="kadikoy">Kadıköy</option>
          </select>
        </div>

        <div class="control-group">
          <label for="routeType"><i class="fas fa-route"></i> Rota Türü</label>
          <select id="routeType">
            <option value="driving">Araç ile</option>
            <option value="walking">Yürüyerek</option>
            <option value="cycling">Bisiklet ile</option>
          </select>
        </div>

        <button class="route-button fade-in" onclick="calculateRoute()">
          <i class="fas fa-route"></i>
          Rotayı Hesapla
        </button>

        <div class="route-info fade-in" id="routeInfo" style="display: none;">
          <div class="info-item">
            <span>Başlangıç:</span>
            <span id="startLocation">-</span>
          </div>
          <div class="info-item">
            <span>Bitiş:</span>
            <span id="endLocation">-</span>
          </div>
          <div class="info-item">
            <span>Toplam Mesafe:</span>
            <span id="totalDistance">-</span>
          </div>
          <div class="info-item">
            <span>Tahmini Süre:</span>
            <span id="totalDuration">-</span>
          </div>
          <div class="info-item">
            <span>Rota Türü:</span>
            <span id="routeTypeText">-</span>
          </div>
        </div>
      </div>

      <div id="route-map" class="fade-in"></div>
    </div>

    <div style="text-align: center; margin-top: 3rem;">
      <a href="projects.html" class="back-button fade-in">
        <i class="fas fa-arrow-left"></i>
        Projelere Dön
      </a>
    </div>
  </main>

  <script>
    let map;
    let vectorSource;

    // İstanbul'daki GERÇEK koordinatlar
    const locations = {
      'besiktas': { name: 'Beşiktaş', lon: 29.0082, lat: 41.0425 },
      'taksim': { name: 'Taksim Meydanı', lon: 28.9843, lat: 41.0370 },
      'sultanahmet': { name: 'Sultanahmet', lon: 28.9795, lat: 41.0086 },
      'kapalicarsi': { name: 'Kapalıçarşı', lon: 28.9705, lat: 41.0108 },
      'uskudar': { name: 'Üsküdar', lon: 29.0154, lat: 41.0227 },
      'kadikoy': { name: 'Kadıköy', lon: 29.0260, lat: 40.9906 }
    };

    // GERÇEK mesafeler (km) - Google Maps verileri
    const realDistances = {
      'besiktas-kapalicarsi': 8.2,
      'besiktas-taksim': 3.5,
      'besiktas-sultanahmet': 8.5,
      'besiktas-uskudar': 5.8,
      'besiktas-kadikoy': 11.3,
      'taksim-kapalicarsi': 4.1,
      'taksim-sultanahmet': 4.3,
      'taksim-uskudar': 8.2,
      'taksim-kadikoy': 12.8,
      'sultanahmet-kapalicarsi': 1.2,
      'sultanahmet-uskudar': 7.5,
      'sultanahmet-kadikoy': 13.2,
      'kapalicarsi-uskudar': 7.8,
      'kapalicarsi-kadikoy': 13.5,
      'uskudar-kadikoy': 4.2
    };

    function initRouteMap() {
      // Vektör kaynağı oluştur
      vectorSource = new ol.source.Vector();
      
      const vectorLayer = new ol.layer.Vector({
        source: vectorSource
      });

      map = new ol.Map({
        target: 'route-map',
        layers: [
          new ol.layer.Tile({
            source: new ol.source.OSM()
          }),
          vectorLayer
        ],
        view: new ol.View({
          center: ol.proj.fromLonLat([28.9869, 41.0186]),
          zoom: 12
        })
      });
    }

    function calculateRoute() {
      const startId = document.getElementById('startPoint').value;
      const endId = document.getElementById('endPoint').value;
      const routeType = document.getElementById('routeType').value;

      const startLoc = locations[startId];
      const endLoc = locations[endId];

      if (!startLoc || !endLoc) {
        alert('Geçersiz konum seçimi!');
        return;
      }

      // Önceki işaretleyicileri temizle
      vectorSource.clear();

      // Başlangıç noktası işaretleyicisi (Yeşil)
      const startMarker = new ol.Feature({
        geometry: new ol.geom.Point(ol.proj.fromLonLat([startLoc.lon, startLoc.lat])),
        name: startLoc.name
      });

      startMarker.setStyle(new ol.style.Style({
        image: new ol.style.Circle({
          radius: 8,
          fill: new ol.style.Fill({color: '#00FF00'}),
          stroke: new ol.style.Stroke({
            color: 'white',
            width: 2
          })
        })
      }));

      // Bitiş noktası işaretleyicisi (Kırmızı)
      const endMarker = new ol.Feature({
        geometry: new ol.geom.Point(ol.proj.fromLonLat([endLoc.lon, endLoc.lat])),
        name: endLoc.name
      });

      endMarker.setStyle(new ol.style.Style({
        image: new ol.style.Circle({
          radius: 8,
          fill: new ol.style.Fill({color: '#FF0000'}),
          stroke: new ol.style.Stroke({
            color: 'white',
            width: 2
          })
        })
      }));

      vectorSource.addFeature(startMarker);
      vectorSource.addFeature(endMarker);

      // GERÇEK mesafe ve süre hesapla
      const distance = getRealDistance(startId, endId);
      const duration = calculateRealDuration(distance, routeType);

      // Bilgileri göster
      document.getElementById('startLocation').textContent = startLoc.name;
      document.getElementById('endLocation').textContent = endLoc.name;
      document.getElementById('totalDistance').textContent = distance + ' km';
      document.getElementById('totalDuration').textContent = duration;
      document.getElementById('routeTypeText').textContent = 
        routeType === 'driving' ? 'Araç' : routeType === 'walking' ? 'Yürüyüş' : 'Bisiklet';
      
      document.getElementById('routeInfo').style.display = 'block';

      // Haritayı her iki noktayı da gösterecek şekilde odakla
      const extent = vectorSource.getExtent();
      map.getView().fit(extent, { padding: [50, 50, 50, 50], duration: 1000 });
    }

    function getRealDistance(startId, endId) {
      const key1 = `${startId}-${endId}`;
      const key2 = `${endId}-${startId}`;
      
      // Gerçek mesafeyi döndür
      return realDistances[key1] || realDistances[key2] || 5.0;
    }

    function calculateRealDuration(distance, routeType) {
      let averageSpeed;
      let trafficFactor = 1;
      
      switch(routeType) {
        case 'driving': 
          averageSpeed = 35;
          trafficFactor = 1.4;
          break;
        case 'walking': 
          averageSpeed = 5;
          break;
        case 'cycling': 
          averageSpeed = 15;
          trafficFactor = 1.1;
          break;
        default: 
          averageSpeed = 10;
      }
      
      const hours = (distance / averageSpeed) * trafficFactor;
      const totalMinutes = Math.round(hours * 60);
      
      if (totalMinutes < 60) {
        return totalMinutes + ' dakika';
      } else {
        const hrs = Math.floor(totalMinutes / 60);
        const mins = totalMinutes % 60;
        return mins > 0 ? `${hrs} saat ${mins} dakika` : `${hrs} saat`;
      }
    }

    // Sayfa yüklendiğinde haritayı başlat
    document.addEventListener('DOMContentLoaded', function() {
      initRouteMap();
    });
  </script>
</body>
</html>